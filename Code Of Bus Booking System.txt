<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bus Booking System</title>
<style>
body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f5f5f5; }
header { background: #1976d2; color: #fff; padding: 15px; text-align: center; font-size: 1.5em; }
.container { max-width: 900px; margin: 20px auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
.form-group { margin-bottom: 10px; }
label { display: block; margin-bottom: 5px; }
input, button { padding: 8px; width: 100%; box-sizing: border-box; }
button { background: #1976d2; color: white; border: none; cursor: pointer; }
button:hover { background: #1259a5; }
.bus-card { border: 1px solid #ddd; padding: 15px; margin-top: 15px; border-radius: 6px; }
.seat-grid { display: grid; grid-template-columns: repeat(5, 50px); gap: 8px; margin-top: 15px; }
.seat { width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; border-radius: 6px; cursor: pointer; }
.available { background: #4caf50; color: white; }
.booked { background: #ccc; color: #666; cursor: not-allowed; }
.selected { background: #1976d2; color: white; }
.summary { background: #e3f2fd; padding: 15px; margin-top: 15px; border-radius: 6px; }
.success { background: #c8e6c9; padding: 20px; border-radius: 6px; text-align: center; }
</style>
</head>
<body>

<header>Bus Booking System</header>
<div class="container" id="main"></div>

<script>
const buses = [
{ id: 1, from: "City A", to: "City B", time: "08:00 AM", fare: 50, seats: 30, booked: [1,2,3,4,5] },
{ id: 2, from: "City A", to: "City C", time: "09:30 AM", fare: 70, seats: 30, booked: [10,11,12] }
];

let selectedBus = null;
let selectedSeats = [];

function loadSearchForm() {
document.getElementById("main").innerHTML = `
<h2>Find Your Bus</h2>
<div class="form-group">
<label>From</label>
<input type="text" id="from" placeholder="Enter source city" value="City A">
</div>
<div class="form-group">
<label>To</label>
<input type="text" id="to" placeholder="Enter destination city" value="City B">
</div>
<button onclick="searchBus()">Search</button>
<div id="results"></div>
`;
}

function searchBus() {
const from = document.getElementById("from").value.trim();
const to = document.getElementById("to").value.trim();
const results = buses.filter(b => b.from.toLowerCase() === from.toLowerCase() && b.to.toLowerCase() === to.toLowerCase());

const resultsDiv = document.getElementById("results");
resultsDiv.innerHTML = "";
if (results.length === 0) {
resultsDiv.innerHTML = "<p>No buses found for this route.</p>";
return;
}

results.forEach(bus => {
const div = document.createElement("div");
div.className = "bus-card";
div.innerHTML = `
<strong>Bus ${bus.id}</strong> | ${bus.from} â†’ ${bus.to} <br>
Departure: ${bus.time} | Fare: $${bus.fare} <br><br>
<button onclick="selectBus(${bus.id})">Select Seats</button>
`;
resultsDiv.appendChild(div);
});
}

function selectBus(id) {
selectedBus = buses.find(b => b.id === id);
selectedSeats = [];
let seatHTML = "";
for (let i = 1; i <= selectedBus.seats; i++) {
let cls = "available";
if (selectedBus.booked.includes(i)) cls = "booked";
seatHTML += `<div class="seat ${cls}" onclick="toggleSeat(${i})">${i}</div>`;
}
document.getElementById("main").innerHTML = `
<h2>Select Seats for Bus ${selectedBus.id}</h2>
<div class="seat-grid">${seatHTML}</div>
<div class="summary" id="summary"></div>
<button onclick="loadSearchForm()">Cancel</button>
`;
}

function toggleSeat(num) {
if (selectedBus.booked.includes(num)) return;
if (selectedSeats.includes(num)) {
selectedSeats = selectedSeats.filter(s => s !== num);
} else {
selectedSeats.push(num);
}
document.querySelectorAll(".seat").forEach(seat => {
if (parseInt(seat.textContent) === num) {
seat.classList.toggle("selected");
}
});
updateSummary();
}

function updateSummary() {
const summary = document.getElementById("summary");
if (selectedSeats.length === 0) {
summary.innerHTML = "";
return;
}
const total = selectedSeats.length * selectedBus.fare;
summary.innerHTML = `
<p>Selected Seats: ${selectedSeats.join(", ")}</p>
<p>Total Fare: $${total}</p>
<div class="form-group"><label>Name</label><input type="text" id="name"></div>
<div class="form-group"><label>Email</label><input type="email" id="email"></div>
<button onclick="confirmBooking()">Confirm Booking</button>
`;
}

function confirmBooking() {
const name = document.getElementById("name").value.trim();
const email = document.getElementById("email").value.trim();
if (!name || !email) {
alert("Please fill passenger details");
return;
}
selectedBus.booked.push(...selectedSeats);
document.getElementById("main").innerHTML = `
<div class="success">
<h2>Booking Confirmed!</h2>
<p>Thank you ${name}, your seats (${selectedSeats.join(", ")}) are booked.</p>
<button onclick="loadSearchForm()">New Booking</button>
</div>
`;
}

loadSearchForm();
</script>
</body>
</html>